<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><meta name="author" content="OpenTable"><link rel="icon" href="/favicon.png"><title>OpenTable Tech UK Blog</title><meta name="description"><link rel="alternate" type="application/rss+xml" title="OpenTable Tech UK Blog" href="/atom.xml"><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="stylesheet" href="/css/bootstrap.min.css"><link rel="stylesheet" href="/css/main.css"><script src="//fonts.otstatic.com/zys4lfz.js"></script><link rel="stylesheet" href="/css/highlight.css">
</head><body><nav class="navbar navbar-default navbar-fixed-top navbar-custom"><div class="container-fluid"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target="#main-navbar" class="navbar-toggle"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand">OpenTable Tech UK Blog</a></div><div id="main-navbar" class="collapse navbar-collapse"><ul class="nav navbar-nav navbar-right"><li><a href="/about/">About</a></li><li><a href="/archives/">Archive</a></li><li><a href="/blog/authors/">Authors</a></li></ul></div><div class="avatar-container"><div class="avatar-img-border"><a href="/"><img src="/opentable.png" class="avatar-img"></a></div></div></div></nav><div id="header-big-imgs" data-num-img='3' data-img-src-1="/bigimgs/building.jpg" data-img-desc-1="Alphabeta Building" data-img-src-2="/bigimgs/kitchen.jpg" data-img-desc-2="OpenTable London office" data-img-src-3="/bigimgs/office.jpg" data-img-desc-3="OpenTable Engineers"></div><header class="header-section has-img"><div class="intro-header big-img"><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class="page-heading"><h1>OpenTable Tech UK Blog</h1><hr class="small"><span class="page-subheading">The technology blog for OpenTable UK.</span></div></div></div></div><span class="img-desc"></span></div></header><div role="main" class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class="posts-list"><article class="post-preview"><a href="/blog/2014/10/22/hobknob-v1-dot-0-now-with-authorization/"><h2 class="post-title">Hobknob v1.0: Now with authorization</h2></a><p class="post-meta">Posted on 22 October 2014 · <a href="/blog/categories/Hobknob/" class="tag post-meta">Hobknob</a></p><div class="post-entry"><p>We are pleased to announce the version 1.0 release of <a href="https://github.com/opentable/hobknob" target="_blank" rel="noopener">Hobknob</a>, our open-source feature toggle management system. With it comes a few additions and several improvements. </p>
<p>This post will expand on some of the changes, in particular, authorisation via access control lists.<br>For an introduction to Hobknob, see our previous post: <a href="/blog/2014/09/04/introducing-hobknob-feature-toggling-with-etcd/">Introducing Hobknob: Feature toggling with etcd</a>.</p>
<h2 id="Authorisation-with-ACLs"><a href="#Authorisation-with-ACLs" class="headerlink" title="Authorisation with ACLs"></a>Authorisation with ACLs</h2><p>A much requested feature was the ability to control who can add/update/delete toggles on an application by application basis. We achieve this via the use if an Access Control List for each application. Users that are part of the ACL for an application are known as application owners.</p>
<p><img src="/images/posts/hobknob-owners.png" alt="Hobknob Owner List"></p>
<p>Application owners can (for an owned application):</p>
<ul>
<li>Add toggles</li>
<li>Set the value of a toggle</li>
<li>Delete toggles</li>
<li>Add additional owners</li>
<li>Remove owners</li>
</ul>
<p>Everyone can:</p>
<ul>
<li>Add an application</li>
<li>See toggles</li>
<li>See application owners</li>
<li>See the audit trail for a toggle</li>
</ul>
<p>When a user creates an new application, they are automatically added as an owner for that application.<br>The user can then add other application owners by clicking the ‘Add user’ button in the Owners panel and entering the users email address.</p></div><a href="/blog/2014/10/22/hobknob-v1-dot-0-now-with-authorization/" class="post-read-more">[Read More]</a></article><article class="post-preview"><a href="/blog/2014/10/06/puppetconf-2014-part-3/"><h2 class="post-title">PuppetConf 2014 - Part 3</h2></a><p class="post-meta">Posted on 6 October 2014 · <a href="/blog/categories/Puppet/" class="tag post-meta">Puppet</a> · <a href="/blog/categories/Conferences/" class="tag post-meta">Conferences</a> · <a href="/blog/categories/PuppetConf-2014/" class="tag post-meta">PuppetConf 2014</a></p><div class="post-entry"><h2 id="Day-2"><a href="#Day-2" class="headerlink" title="Day 2"></a>Day 2</h2><p>This is our summary of PuppetConf 2014. In our <a href="/blog/2014/10/06/puppetconf-2014-part-2/">previous post</a> we gave an overview of the first day of the conference. This post will provide an<br>overview of the final day.</p>
<p>There were even more inspiring keynotes and lots more talks which have given us plenty of ideas to go home and think about.</p>
<h3 id="Key-Notes"><a href="#Key-Notes" class="headerlink" title="Key Notes"></a>Key Notes</h3><h4 id="Animating-the-Puppet-Creating-a-Culture-of-Puppet-Adoption-Dan-Spurling-spurling-Getty-Images-Slides"><a href="#Animating-the-Puppet-Creating-a-Culture-of-Puppet-Adoption-Dan-Spurling-spurling-Getty-Images-Slides" class="headerlink" title="Animating the Puppet: Creating a Culture of Puppet Adoption - Dan Spurling (@spurling), Getty Images - Slides"></a>Animating the Puppet: Creating a Culture of Puppet Adoption - Dan Spurling (<a href="https://twitter.com/spurling" target="_blank" rel="noopener">@spurling</a>), Getty Images - <a href="http://www.slideshare.net/PuppetLabs/keynote-animating-the-puppet-creating-a-culture-of-puppet-adoption-puppetconf-2014" target="_blank" rel="noopener">Slides</a></h4><div style="float:right;margin:0 10px 10px 10px;width:50%"><br>  <img src="/images/posts/puppetconf-dan.jpg"><br></div>


<p>Dan Spuring, VP of Tech Services at Getty came out of the gate with a strong message. His <a href="http://www.urbandictionary.com/define.php?term=GSD" target="_blank" rel="noopener">GSD</a> t-shirt<br>giving you a clear understanding of who he is. His talk about creating a culture of Puppet adoption at his company was a great story of how challenging it<br>can be to move various business units with projects of various ages to a configuration-management (with Puppet) ethos.</p>
<p>I think it is good to hear that they are rolling cm out into that huge backlog of legacy infrastructure that we all try to pretend isn’t there.<br>How do you make it integrate into existing processes? How do you sell the DevOps message at the same time as introducing a tool like Puppet into the mix as<br>part of that message? Dan gave some thoughts on this and it was good to hear some of that from someone who appears to be on the other side of that challenge.</p>
<p>One of the analogies that he used I that found quite useful was that undertaking a project like this is like moving a boulder. It requires an executive sponsor to<br>get the thing moving at all and then it requires everyone pulling in the same direction if it’s ever doing to get anywhere.</p>
<p>The big take-away was that you need to puppetize right away - that you can’t wait for the right environment or conditions to start doing it, you just need<br>start now and demonstrate it. This echo’s the Continuous Delivery ideal of “if it hurts, then do it more often”.</p></div><a href="/blog/2014/10/06/puppetconf-2014-part-3/" class="post-read-more">[Read More]</a></article><article class="post-preview"><a href="/blog/2014/10/06/puppetconf-2014-part-2/"><h2 class="post-title">PuppetConf 2014 - Part 2</h2></a><p class="post-meta">Posted on 6 October 2014 · <a href="/blog/categories/Puppet/" class="tag post-meta">Puppet</a> · <a href="/blog/categories/Conferences/" class="tag post-meta">Conferences</a> · <a href="/blog/categories/PuppetConf-2014/" class="tag post-meta">PuppetConf 2014</a></p><div class="post-entry"><h2 id="Day-1"><a href="#Day-1" class="headerlink" title="Day 1"></a>Day 1</h2><p>This is our summary of PuppetConf 2014. In our <a href="/blog/2014/10/06/puppetconf-2014-part-1/">previous post</a> we gave an overview of the contributor summit. This post will provide an overview<br>of the first day of PuppetConf.</p>
<p>As you might expect there were great keynotes with plenty of announcements and too many talks for us to attend. We have provided an outline for all the talks<br>we did attend and links to those we didn’t.</p>
<h3 id="KeyNotes"><a href="#KeyNotes" class="headerlink" title="KeyNotes"></a>KeyNotes</h3><h4 id="Nearly-a-Decade-of-Puppet-What-We’ve-Learned-and-Where-We’re-Going-Next-Luke-Kanies-PuppetLabs-Slides"><a href="#Nearly-a-Decade-of-Puppet-What-We’ve-Learned-and-Where-We’re-Going-Next-Luke-Kanies-PuppetLabs-Slides" class="headerlink" title="Nearly a Decade of Puppet: What We’ve Learned and Where We’re Going Next - Luke Kanies, PuppetLabs - Slides"></a>Nearly a Decade of Puppet: What We’ve Learned and Where We’re Going Next - Luke Kanies, PuppetLabs - <a href="http://www.slideshare.net/PuppetLabs/luke-kanies-keynote-nearly-a-decade-of-puppet-what-weve-learned-and-where-were-going-next-puppetconf-2014" target="_blank" rel="noopener">Slides</a></h4><div style="float:right;margin:0 10px 10px 10px;width:50%"><br>  <img src="/images/posts/puppetconf-luke-1.jpg"><br></div>

<p>The big keynote of the event to kick off the first day from the author of Puppet himself. This was obviously going to be a tweet worthy affair full of photos<br>and big announcements and it did not disappoint.</p>
<p>Native Clients (CFactor + C++ rewrite of agents) are coming in the very near future. This is not only a matter of improving the performance for existing users part<br>of philosophy of PuppetLabs to become ubiquitous across as many devices and platforms as possible. This is one of those improvements that is really setting up<br>PuppetLabs for the future.</p>
<p>Puppet Server (a.k.a the Clojure rewrite). This is PuppetLabs big move away from Ruby on onto the JVM. Being on the JVM means they can slowly rewrite the<br>codebase while also maintaining compatibility thanks to JRuby. They have gained a lot of experience with Clojure thanks to the PuppetDB &amp; TrapKeeper projects and given how<br>successful that project has been it has helped ease many of the fears people have in moving the JVM. Puppet Server is also a self contained application so there<br>is no longer any need to worry about the whole apache/passanger yak shave. There was even a demo on the metrics that are now exposed by Puppet Server - yes<br>you can now plug Puppet into graphite.</p>
<p>There have been plenty of follow-ups on this that you might be interested in reading:</p></div><a href="/blog/2014/10/06/puppetconf-2014-part-2/" class="post-read-more">[Read More]</a></article><article class="post-preview"><a href="/blog/2014/10/06/puppetconf-2014-part-1/"><h2 class="post-title">PuppetConf 2014 - Part 1</h2></a><p class="post-meta">Posted on 6 October 2014 · <a href="/blog/categories/Puppet/" class="tag post-meta">Puppet</a> · <a href="/blog/categories/Conferences/" class="tag post-meta">Conferences</a> · <a href="/blog/categories/PuppetConf-2014/" class="tag post-meta">PuppetConf 2014</a></p><div class="post-entry"><p><img src="/images/posts/puppetconf2014.jpg" alt="The start of PuppetConf 2014"></p>
<p>It has been one week since our attendance at this years PuppetConf and we have just now caught up on all the great talks that were<br>given and the projects demonstrated over the 3 day period. Here’s our summary of the event (split into 3 parts), hopefully you will<br>find as much inspiration in the content as we have.</p>
<h2 id="Day-0-Contributor-Summit"><a href="#Day-0-Contributor-Summit" class="headerlink" title="Day 0 - Contributor Summit"></a>Day 0 - Contributor Summit</h2><p>For the first time, this years Puppet Contributor Summit was held the day prior to the conference itself and I think this was a great idea.<br>Most of the Puppetlabs staff and many of the high profile community members were in town for PuppetConf anyway so it made sense. There was<br>roughly 60-70 people in attendance both senior contributors and people new to the community so it was a great mix that led to some<br>fantastic discussions.</p>
<p>The day itself had two tracks: a module track for forge modules and a core track for people contributing to puppet and factor.</p>
<p>Those of you who have seen our <a href="http://forge.puppetlabs.com/opentable" target="_blank" rel="noopener">forge module page</a> will understand why we chose to stay in the module track.<br>Although I heard there were many great discussions to be had with regards to Puppet 4 in the core track.</p>
<p>Each track was split into three sections: a brief introduction from the track lead Ryan Coleman (<a href="https://twitter.com/ryanycoleman" target="_blank" rel="noopener">@ryanycoleman</a>),<br>followed by some lighting talks and then several hours of hacking and open discussions.</p>
<h3 id="Lightning-Talks"><a href="#Lightning-Talks" class="headerlink" title="Lightning Talks:"></a>Lightning Talks:</h3><p>Here is a quick overview of the lightening talks from the module track:</p>
<h4 id="Puppet-Analytics-Spencer-Krum-nibalizer"><a href="#Puppet-Analytics-Spencer-Krum-nibalizer" class="headerlink" title="Puppet Analytics (Spencer Krum @nibalizer)"></a>Puppet Analytics (Spencer Krum <a href="https://twitter.com/nibalizer" target="_blank" rel="noopener">@nibalizer</a>)</h4></div><a href="/blog/2014/10/06/puppetconf-2014-part-1/" class="post-read-more">[Read More]</a></article><article class="post-preview"><a href="/blog/2014/09/04/introducing-hobknob-feature-toggling-with-etcd/"><h2 class="post-title">Introducing Hobknob: Feature toggling with etcd</h2></a><p class="post-meta">Posted on 4 September 2014 · <a href="/blog/categories/Hobknob/" class="tag post-meta">Hobknob</a></p><div class="post-entry"><p>The ability to dynamically turn features on/off in software without the need to redeploy code is extremely beneficial. Whether you are trialing a new feature or using branch by abstraction to avoid creating feature branches, the use of feature toggles can aid continuous delivery and provide a mechanism to reduce mean time to resolution when an issue occurs.</p>
<p>With a relatively large engineering department with multiple teams spread across the US and UK the need to manage feature toggles has evolved to the point whereby individual teams have developed their own implementations. Most of these are simple config files.</p>
<p>We decided to unify this effort by providing a central place to store feature toggles, provide a dashboard to be able to turn these toggles on/off and provide language specific clients to integrate into our software components.</p>
<p>The results of this was <a href="https://github.com/opentable/hobknob" target="_blank" rel="noopener">Hobknob</a>.</p>
<h2 id="Why-etcd"><a href="#Why-etcd" class="headerlink" title="Why etcd?"></a>Why etcd?</h2><p>We made the decision to use <a href="https://github.com/coreos/etcd" target="_blank" rel="noopener">etcd</a>. Etcd is “a highly-available key value store for shared configuration” (<a href="https://github.com/coreos/etcd#etcd" target="_blank" rel="noopener">https://github.com/coreos/etcd#etcd</a>). It provides a HTTP API to store and retrieve data. This is what makes it perfect for a feature toggling solution used by multiple components. It means that we didn’t have to write an intermediate API on top of a data store for consumers.</p>
<p>So, for example, to store a feature toggle in etcd:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -L http://127.0.0.1:4001/v2/keys/v1/toggles/restaurant-api/testtoggle -XPUT -d value=&quot;true&quot;</span><br></pre></td></tr></table></figure>
<p>To retrieve a feature toggle:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -L http://127.0.0.1:4001/v2/keys/v1/toggles/restaurant-api/testtoggle</span><br></pre></td></tr></table></figure></div><a href="/blog/2014/09/04/introducing-hobknob-feature-toggling-with-etcd/" class="post-read-more">[Read More]</a></article></div><ul class="pager main-pager"><li class="previous"><a href="/page/6">← Newer Posts</a></li><li class="next"><a href="/page/8">Older Posts →</a></li></ul></div></div></div><footer><div class="container beautiful-jekyll-footer"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center footer-links"><li><a href="https://github.com/opentable" title="GitHub"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-stack-1x fa-inverse fa-github"></i></span></a></li><li><a href="https://twitter.com/opentabletechuk" title="Twitter"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-stack-1x fa-inverse fa-twitter"></i></span></a></li><li><a href="https://www.linkedin.com/company/12181" title="LinkedIn"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-stack-1x fa-inverse fa-linkedin"></i></span></a></li><li><a href="http://stackoverflow.com/jobs/companies/opentable" title="StackOverflow"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-stack-1x fa-inverse fa-stack-overflow"></i></span></a></li></ul><p class="copyright text-muted">© OpenTable • 2019 • <a href="mailto:undefined"></a>
</p><p class="theme-by text-muted">Theme by
<a href="https://github.com/twoyao/beautiful-hexo">beautiful-hexo</a></p></div></div></div></footer><script src="/js/jquery-1.11.2.min.js"></script><script src="/js/bootstrap.min.js"></script><script src="/js/main.js"></script><script src="/js/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script>(function (i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
    a = s.createElement(o),
            m = s.getElementsByTagName(o)[0];
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m)
})(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
ga('create', 'UA-2621903-16', 'auto');
ga('send', 'pageview');</script></body></html>