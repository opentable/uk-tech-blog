<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><meta name="author" content="OpenTable"><link rel="icon" href="/favicon.png"><title>OpenTable Tech UK Blog</title><meta name="description"><link rel="alternate" type="application/rss+xml" title="OpenTable Tech UK Blog" href="/atom.xml"><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="stylesheet" href="/css/bootstrap.min.css"><link rel="stylesheet" href="/css/main.css"><script src="//fonts.otstatic.com/zys4lfz.js"></script><link rel="stylesheet" href="/css/highlight.css">
</head><body><nav class="navbar navbar-default navbar-fixed-top navbar-custom"><div class="container-fluid"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target="#main-navbar" class="navbar-toggle"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand">OpenTable Tech UK Blog</a></div><div id="main-navbar" class="collapse navbar-collapse"><ul class="nav navbar-nav navbar-right"><li><a href="/about/">About</a></li><li><a href="/archives/">Archive</a></li><li><a href="/blog/authors/">Authors</a></li></ul></div><div class="avatar-container"><div class="avatar-img-border"><a href="/"><img src="/opentable.png" class="avatar-img"></a></div></div></div></nav><div id="header-big-imgs" data-num-img='3' data-img-src-1="/bigimgs/building.jpg" data-img-desc-1="Alphabeta Building" data-img-src-2="/bigimgs/kitchen.jpg" data-img-desc-2="OpenTable London office" data-img-src-3="/bigimgs/office.jpg" data-img-desc-3="OpenTable Engineers"></div><header class="header-section has-img"><div class="intro-header big-img"><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class="page-heading"><h1>OpenTable Tech UK Blog</h1><hr class="small"><span class="page-subheading">The technology blog for OpenTable UK.</span></div></div></div></div><span class="img-desc"></span></div></header><div role="main" class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class="posts-list"><article class="post-preview"><a href="/blog/2013/06/07/nlocalgeocoder/"><h2 class="post-title">nLocalGeoCoder</h2></a><p class="post-meta">Posted on 7 June 2013 · <a href="/blog/categories/OSS/" class="tag post-meta">OSS</a> · <a href="/blog/categories/Net/" class="tag post-meta">.Net</a> · <a href="/blog/categories/C/" class="tag post-meta">C#</a> · <a href="/blog/categories/Ruby/" class="tag post-meta">Ruby</a> · <a href="/blog/categories/Collaboration/" class="tag post-meta">Collaboration</a></p><div class="post-entry"><h2 id="History"><a href="#History" class="headerlink" title="History"></a>History</h2><p>With OpenTable having engineering teams spread across multiple offices it’s important for us to maintain open email dialogue about new products us or our teams have created, new tools we’ve discovered or problem solving approaches that have helped us achieve our goals.  Recently in one of these emails Aish introduced the team to a new open source ruby implementation of reverse geocode lookup for latitude and longitude he’d written called <a href="https://github.com/aishfenton/local-geocoder" target="_blank" rel="external">local-geocoder</a>.  With an interest in understanding how this worked, to learn a bit of ruby, to make this project accessible to .net developers and just to see how long it would take I decided to port it to C# and .net.</p>
<h2 id="How-reverse-geocoding-works"><a href="#How-reverse-geocoding-works" class="headerlink" title="How reverse geocoding works"></a>How reverse geocoding works</h2><p>Latitude and longitude geographical coordinates are great but 37.819548,-122.479046 doesn’t really mean much to me. Knowing this is in the San Francisco bay area is much more useful interpretation.</p>
<p>That’s where reverse geocoding comes in.  Normally geocoding tries to locate geographical coordinates from other data like postal (zip) codes or street level addresses.  Reverse geocoding does the opposite and can, given enough lookup data, be very precise.</p>
<p>There are a number of online reverse geocoding providers, like Google, who can perform this for you however there are normally usage limits or costs for using them.  To add to this the latency of these service can slow your logic down.  Wouldn’t it be nice if this could be done locally at high speed and in memory.</p>
<h2 id="Using-nLocalGeocoder"><a href="#Using-nLocalGeocoder" class="headerlink" title="Using nLocalGeocoder"></a>Using nLocalGeocoder</h2><p>It’s really easy to use, just new up a Geocoder and you’re off…</p>
<pre><code>var geocoder = new Geocoder();
var result = geocoder.ReverseGeocode(-122.479046M, 37.819548M);
</code></pre><p>The result variable now holds an instance of the Result struct.  This type has the following properties:-</p></div><a href="/blog/2013/06/07/nlocalgeocoder/" class="post-read-more">[Read More]</a></article><article class="post-preview"><a href="/blog/2013/06/07/getting-started-with-specrun/"><h2 class="post-title">Getting Started With SpecRun</h2></a><p class="post-meta">Posted on 7 June 2013 · <a href="/blog/categories/Acceptance-tests/" class="tag post-meta">Acceptance tests</a> · <a href="/blog/categories/SpecRun/" class="tag post-meta">SpecRun</a> · <a href="/blog/categories/Automation/" class="tag post-meta">Automation</a> · <a href="/blog/categories/CI/" class="tag post-meta">CI</a></p><div class="post-entry"><h2 id="First-some-background"><a href="#First-some-background" class="headerlink" title="First some background"></a>First some background</h2><p>We recently switched from writing automated acceptance from Cucumber to SpecFlow… this is no slight on Cucumber it’s just that we had a lot of C# developers who wanted to get closer to writing acceptance tests. Worth adding that SpecFlow has also come a long way as a .Net port of Cucumber and is pretty much like for like now.</p>
<h2 id="Why-should-I-bother-with-SpecRun"><a href="#Why-should-I-bother-with-SpecRun" class="headerlink" title="Why should I bother with SpecRun?"></a>Why should I bother with SpecRun?</h2><p>Initially we ran our entire unit, integration and acceptance tests via nUnit. Pretty much industry standard but we felt nUnit wasn’t really a good tool to run acceptance tests - yes it’ll do the job but we were looking for better performance, quicker failure feedback and more comprehensive reporting. If you want details on SpecRun vs. nUnit Gasper has a <a href="http://gasparnagy.com/2011/09/specrun-because-integration-tests-are-not-unit-tests/" target="_blank" rel="external">great blog post</a>.</p>
<salespitch>SpecRun itself is free to use although there is a random delay when running acceptance locally, setting up SpecRun on a CI environment is totally free and does not include the same delay. Definitely worth trying out and you can purchase a licence later if you like what it offers.</salespitch>

<h2 id="Installing-SpecRun"><a href="#Installing-SpecRun" class="headerlink" title="Installing SpecRun"></a>Installing SpecRun</h2><p>If you are already using SpecFlow with nUnit the migration to SpecRun is really simple - <a href="http://www.youtube.com/watch?v=c2ge90BWeI0" target="_blank" rel="external">this video</a> shows you how to setup the test runner but I found myself having to watch it too many times. This post is an attempt at recording the steps should we roll out SpecRun for another project.  </p>
<p>I’m assuming you’re running Visual Studio and are familiar with Nuget packages. I’ll break it down so I don’t miss anything:</p>
<ol>
<li>In VS, select your Acceptance test project and get the Nuget package down for SpecRun: <code>install-package SpecRun</code>.</li>
<li>You’ll notice Nuget automatically adds configuration to your app.config so it’s safe to remove the nUnit provider setting (this is to enable you to pick and choose your test runner but we prefer to only use SpecRun).</li>
<li>Open the Default.srprofile file and we normally delete any commented settings here.</li>
<li>Still inside Default.srprofile add the properties for projectName and projectId. The projectName is what you see in VS the projectId can be found by opening the acceptance .proj file and taking the projectGuid.</li>
<li>Setup the execution properties - this really depends on what you want to get out of running the tool - what retry count you want, whether to run on multiple threads, etc. Here are the values we normally use:</li>
</ol>
<p><code>&lt;Execution retryFor=&quot;None&quot; stopAfterFailures=&quot;100&quot; testThreadCount=&quot;1&quot; testSchedulingMode=&quot;Sequential&quot; apartmentState=&quot;STA&quot;/&gt;</code></p></div><a href="/blog/2013/06/07/getting-started-with-specrun/" class="post-read-more">[Read More]</a></article><article class="post-preview"><a href="/blog/2013/06/01/about-this-blog/"><h2 class="post-title">Welcome to the OpenTable UK technology blog</h2></a><p class="post-meta">Posted on 1 June 2013</p><div class="post-entry"><p>Hi, my name is Paul Harrington and I’d like to welcome you to the <a href="http://www.opentable.co.uk" target="_blank" rel="external">OpenTable UK</a> technology blog &ndash; a place where we’d like to share our passions and introduce you to a whole new world of fabulous dining and amazing technology.</p>

<h2>Who are we?</h2>

<p>First and foremost we’re into food. And restaurants. And delighting our diners with wonderful dining experiences. And if you want to hear more from us about <i>these</i> passions then pay a visit to the <a href="http://blog.opentable.co.uk" target="_blank" rel="external">OpenTable UK blog</a> or the <a href="http://press.opentable.co.uk" target="_blank" rel="external">OpenTable UK Press Centre</a> and follow <a href="https://twitter.com/opentableuk" target="_blank" rel="external">@OpenTableUK</a> on Twitter &ndash; because on this blog you’re only going to hear about our love of technology and all the cool stuff we do with it!<br><br></p><p>But first some introduction is needed. I am the Senior Director of Engineering and have worked at OpenTable for four years. My principal goal is to create environments where awesome teams of Engineers can build awesome software! The specific journey we’ve been through to achieve this is a topic for another day but there is one key message that is worth sharing. When I first arrived, I had a dream that I shared with the team &ndash; <b>to create the best engineering team in the UK</b>. It was an ambitious target and we don’t really have an effective way of testing whether we’ve been successful in that goal. But the consistent belief in achieving that vision was enough to at least make it feel true and it has led to some spectacular results, some of which you will read about on here.</p>

<h2>What do we do?</h2>

<h3>We build great software.</h3>

<p>We’re passionate about high quality code and we use cutting-edge technologies and techniques to achieve it. The core of our system is built in .Net so we have a lot of expertise in this area but we’re not limited to a single language. We like to explore new languages and look to apply it wherever it is relevant. We’re meticulous in the code we write but pragmatic when necessary to deliver the best results for the business. Legacy code is in trouble as we look for every opportunity to get rid of it, but that in itself is never the goal &ndash; the goal is to build great software that delivers value to our customers.</p>

<h3>We believe in testing.</h3>

<p>We test everything we produce to within an inch of its life. We employ TDD and BDD at a unit level and we create suites of integration tests and business readable acceptance tests. We build performance tests, load tests and smoke tests and have our systems continuously monitored so we can spot when issues occur. And we do this all within the Engineering team, there is no “throwing over the wall” to a separate QA team that does all the testing &ndash; the teams of Engineers themselves are responsible for the quality of our systems.</p>

<h3>We move fast.</h3></div><a href="/blog/2013/06/01/about-this-blog/" class="post-read-more">[Read More]</a></article></div><ul class="pager main-pager"><li class="previous"><a href="/page/6">← Newer Posts</a></li></ul></div></div></div><footer><div class="container beautiful-jekyll-footer"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center footer-links"><li><a href="https://github.com/opentable" title="GitHub"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-stack-1x fa-inverse fa-github"></i></span></a></li><li><a href="https://twitter.com/opentabletechuk" title="Twitter"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-stack-1x fa-inverse fa-twitter"></i></span></a></li><li><a href="https://www.linkedin.com/company/12181" title="LinkedIn"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-stack-1x fa-inverse fa-linkedin"></i></span></a></li><li><a href="http://stackoverflow.com/jobs/companies/opentable" title="StackOverflow"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-stack-1x fa-inverse fa-stack-overflow"></i></span></a></li></ul><p class="copyright text-muted">© OpenTable • 2017 • <a href="mailto:undefined"></a>
</p><p class="theme-by text-muted">Theme by
<a href="https://github.com/twoyao/beautiful-hexo">beautiful-hexo</a></p></div></div></div></footer><script src="/js/jquery-1.11.2.min.js"></script><script src="/js/bootstrap.min.js"></script><script src="/js/main.js"></script><script src="/js/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script>(function (i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
    a = s.createElement(o),
            m = s.getElementsByTagName(o)[0];
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m)
})(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
ga('create', 'UA-2621903-16', 'auto');
ga('send', 'pageview');</script></body></html>