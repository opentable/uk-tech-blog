<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><meta name="author" content="OpenTable"><link rel="icon" href="/favicon.png"><title>OpenTable Tech UK Blog</title><meta name="description"><link rel="alternate" type="application/rss+xml" title="OpenTable Tech UK Blog" href="/atom.xml"><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="stylesheet" href="/css/bootstrap.min.css"><link rel="stylesheet" href="/css/main.css"><script src="//fonts.otstatic.com/zys4lfz.js"></script><link rel="stylesheet" href="/css/highlight.css">
</head><body><nav class="navbar navbar-default navbar-fixed-top navbar-custom"><div class="container-fluid"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target="#main-navbar" class="navbar-toggle"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand">OpenTable Tech UK Blog</a></div><div id="main-navbar" class="collapse navbar-collapse"><ul class="nav navbar-nav navbar-right"><li><a href="/about/">About</a></li><li><a href="/archives/">Archive</a></li><li><a href="/blog/authors/">Authors</a></li></ul></div><div class="avatar-container"><div class="avatar-img-border"><a href="/"><img src="/opentable.png" class="avatar-img"></a></div></div></div></nav><header class="header-section"><div class="intro-header no-img"><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class="post-heading"><h1>PuppetConf 2014 - Part 1</h1><p class="post-meta">Posted by <a href="/blog/authors/lbennett.html">lbennett</a>, 6 October 2014 · <a href="/blog/categories/Puppet/" class="tag post-meta">Puppet</a> · <a href="/blog/categories/Conferences/" class="tag post-meta">Conferences</a> · <a href="/blog/categories/PuppetConf-2014/" class="tag post-meta">PuppetConf 2014</a></p></div></div></div></div></div></header><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><article role="main" class="blog-post"><p><img src="/images/posts/puppetconf2014.jpg" alt="The start of PuppetConf 2014"></p>
<p>It has been one week since our attendance at this years PuppetConf and we have just now caught up on all the great talks that were<br>given and the projects demonstrated over the 3 day period. Here’s our summary of the event (split into 3 parts), hopefully you will<br>find as much inspiration in the content as we have.</p>
<h2 id="Day-0-Contributor-Summit"><a href="#Day-0-Contributor-Summit" class="headerlink" title="Day 0 - Contributor Summit"></a>Day 0 - Contributor Summit</h2><p>For the first time, this years Puppet Contributor Summit was held the day prior to the conference itself and I think this was a great idea.<br>Most of the Puppetlabs staff and many of the high profile community members were in town for PuppetConf anyway so it made sense. There was<br>roughly 60-70 people in attendance both senior contributors and people new to the community so it was a great mix that led to some<br>fantastic discussions.</p>
<p>The day itself had two tracks: a module track for forge modules and a core track for people contributing to puppet and factor.</p>
<p>Those of you who have seen our <a href="http://forge.puppetlabs.com/opentable" target="_blank" rel="external">forge module page</a> will understand why we chose to stay in the module track.<br>Although I heard there were many great discussions to be had with regards to Puppet 4 in the core track.</p>
<p>Each track was split into three sections: a brief introduction from the track lead Ryan Coleman (<a href="https://twitter.com/ryanycoleman" target="_blank" rel="external">@ryanycoleman</a>),<br>followed by some lighting talks and then several hours of hacking and open discussions.</p>
<h3 id="Lightning-Talks"><a href="#Lightning-Talks" class="headerlink" title="Lightning Talks:"></a>Lightning Talks:</h3><p>Here is a quick overview of the lightening talks from the module track:</p>
<h4 id="Puppet-Analytics-Spencer-Krum-nibalizer"><a href="#Puppet-Analytics-Spencer-Krum-nibalizer" class="headerlink" title="Puppet Analytics (Spencer Krum @nibalizer)"></a>Puppet Analytics (Spencer Krum <a href="https://twitter.com/nibalizer" target="_blank" rel="external">@nibalizer</a>)</h4><p>Spencer gave a quick demonstration of his latest project <a href="http://puppet-analytics.org/" target="_blank" rel="external">puppet-analytics</a>. This problem that this tool was aiming to<br>solve was that at the present time the are no good analytics for the forge modules. The number of downloads listed for each module is very inaccurate<br>and can be easily inflated by (for example) an automated CI process. The point of this web app and it’s corresponding client<br><a href="https://github.com/nibalizer/puppet-analytics-client" target="_blank" rel="external">puppet-analytics-client</a> was to be built into an existing tool chain and for end users to report<br>which modules and versions they were using. It also has the added benefit that we could also get stats for teams using private forges.</p>
<p>Ryan also commented that PuppetLabs has some metrics it uses for it’s own modules that can be found here:<br><a href="http://forge-module-metrics.herokuapp.com/" target="_blank" rel="external">http://forge-module-metrics.herokuapp.com/</a></p>
<h4 id="Puppet-Community-Daniele-Sluijters-daenney"><a href="#Puppet-Community-Daniele-Sluijters-daenney" class="headerlink" title="Puppet Community (Daniele Sluijters @daenney)"></a>Puppet Community (Daniele Sluijters <a href="https://twitter.com/daenney" target="_blank" rel="external">@daenney</a>)</h4><p>Discussion of the shared namespace for community modules: <a href="http://puppet-community.github.io/" target="_blank" rel="external">puppet-community</a>. This talk was about a community project<br>to keep modules in a shared namespace so that everyone can work on them independent of company ownership. There are limitations right now with with<br>regards to the forge e.g. no shared accounts and no easy migration path to move modules between namespaces but working with Ryan on that.</p>
<p>This is how the boxen project works and it seems to work pretty well.</p>
<h4 id="Beaker-Testing-Windows-Environments-Liam-Bennett-liamjbennett-me"><a href="#Beaker-Testing-Windows-Environments-Liam-Bennett-liamjbennett-me" class="headerlink" title="Beaker Testing Windows Environments (Liam Bennett @liamjbennett) - me!!"></a>Beaker Testing Windows Environments (Liam Bennett <a href="https://twitter.com/liamjbennett" target="_blank" rel="external">@liamjbennett</a>) - me!!</h4><p>My talk on hacking beaker to work better for testing windows environments.</p>
<p>Demos and PRs. Discussed more in some of our earlier posts: <a href="/blog/2014/09/01/testing-puppet-with-beaker-pt-dot-2-the-windows-story/">Testing Puppet with Beaker pt.2 - The Windows story</a><br>and <a href="/blog/2014/09/01/testing-puppet-with-beaker-pt-dot-3-testing-roles/">Testing Puppet with Beaker pt.3 - Testing Roles</a></p>
<h4 id="Module-Anti-Patterns-Peter-Souter-petems-Slides"><a href="#Module-Anti-Patterns-Peter-Souter-petems-Slides" class="headerlink" title="Module Anti-Patterns (Peter Souter @petems) - Slides"></a>Module Anti-Patterns (Peter Souter <a href="https://twitter.com/petems" target="_blank" rel="external">@petems</a>) - <a href="http://www.slideshare.net/petems/puppet-module-anti-patterns" target="_blank" rel="external">Slides</a></h4><p>Some interesting patterns here that are still quite preverlant in the modules found on the forge. Hopefully improved tooling and the new Puppet Approved<br>program will help here.</p>
<h4 id="Puppetlabs-ModuleSync-tool-Colleen-Murphy-pdx-krinkle"><a href="#Puppetlabs-ModuleSync-tool-Colleen-Murphy-pdx-krinkle" class="headerlink" title="Puppetlabs ModuleSync tool (Colleen Murphy @pdx_krinkle)"></a>Puppetlabs ModuleSync tool (Colleen Murphy <a href="https://twitter.com/pdx_krinkle" target="_blank" rel="external">@pdx_krinkle</a>)</h4><p>A demonstration of the the tool <a href="https://github.com/puppetlabs/modulesync" target="_blank" rel="external">puppetlabs-modulesync</a> which aims to take out some of the pain of managing common<br>static build files across a number of modules (e.g. a common Rakefile or .travis.yml which the same across almost all modules)</p>
<p>Having used this on a number of our modules now I can say that this in extremely useful and I don’t know how we managed without it. A key use case for us was<br>adding support for puppet 3.7 into our test matrix of our travis.yml file. 1 line change - 1 command - 18 modules updated.</p>
<h4 id="Strict-Variables-Tomas-Doran-bobtfish"><a href="#Strict-Variables-Tomas-Doran-bobtfish" class="headerlink" title="Strict Variables (Tomas Doran @bobtfish)"></a>Strict Variables (Tomas Doran <a href="https://twitter.com/bobtfish" target="_blank" rel="external">@bobtfish</a>)</h4><p>Tomas has one very good point to make here: enable <a href="https://docs.puppetlabs.com/references/latest/configuration.html#strictvariables" target="_blank" rel="external">strict_variables</a>. Many<br>languages have a strict option and Puppet’s makes sure to check for those unknown variable references. The latest version of the<br><a href="https://github.com/puppetlabs/puppetlabs_spec_helper" target="_blank" rel="external">puppetlabs_spec_helper</a> supports adding this setting with an environment variable so that you can now<br>add this into your testing matrix.</p>
<p>We have enabled this on our open source modules and it did indeed surfice a few bugs so go and do it now.</p>
<h4 id="Puppet-Documentation-Linting-Peter-Souter-petems"><a href="#Puppet-Documentation-Linting-Peter-Souter-petems" class="headerlink" title="Puppet Documentation Linting (Peter Souter @petems)"></a>Puppet Documentation Linting (Peter Souter <a href="https://twitter.com/petems" target="_blank" rel="external">@petems</a>)</h4><p>While we have very good linking for our puppet manifests themselves thanks to the <a href="http://puppet-lint.com/" target="_blank" rel="external">puppet-lint</a> project. We still do not have any<br>coverage for our documentation of those manifests. That is where Peter’s <a href="https://github.com/petems/puppet-doc-lint" target="_blank" rel="external">puppet-doc-lint</a> project comes in and aims<br>to lint each of you manifests for correct rdoc documentation.</p>
<p>This only supports puppet 3.4.3 right now but it is a useful tool and demonstrations something functional in an area that is missing from the current crop of<br>community tooling. This is going to become more useful as we want to have good documentation for Puppet Approved status.</p>
<p>It is also worth noting that PuppetLabs themselves have been doing some work in this area with<br><a href="https://github.com/puppetlabs/puppetlabs-strings/" target="_blank" rel="external">puppet-strings</a>. This projects works on puppet 3.6 + and support yard doc but is roughly the same idea.</p>
<h4 id="Quick-Survey-Michael-Stahnke-stahnma"><a href="#Quick-Survey-Michael-Stahnke-stahnma" class="headerlink" title="Quick Survey (Michael Stahnke @stahnma)"></a>Quick Survey (Michael Stahnke <a href="https://twitter.com/stahnma" target="_blank" rel="external">@stahnma</a>)</h4><p>Michael here decided to use the opportunity of having everyone in the room to ask a few questions regarding the state of puppet use and the platforms it’s<br>deployed on. Not too many surprises here: Debian (mostly ubuntu 12) and RedHat (mostly centos 6) dominate with a small grouping of other platforms like AIX and<br>Solaris in toe. Some poor individuals still have ubuntu 8 and 10 in production but I won’t name name’s because we have all been in that position before. No<br>mention of windows but then I did bring that up in my own talk so I think that was covered already.</p>
<h3 id="Hacking-and-Discussions"><a href="#Hacking-and-Discussions" class="headerlink" title="Hacking and Discussions"></a>Hacking and Discussions</h3><p>The second part of the day was the hacking and discussions part. This was more un-conference style with variables tables put together to discuss various topics,<br>try and resolves issues or hack on projects. There were four main areas that I noticed: module testing, windows, docker, forge improvements (apologies if I<br>missed your topic/table).</p>
<h4 id="Module-Testing"><a href="#Module-Testing" class="headerlink" title="Module Testing"></a>Module Testing</h4><p>This was probably the most common topic and several tables were set up around this idea but a huge range of things were discussed. Some people wanted to know<br>about how to get up and running with beaker tests using vagrant+vagrant cloud, some wanted to discuss specific platform issues (windows, docker, solaris), other<br> wanted to discuss how best to scale out the tests once you have them.</p>
<p>There was some discussion based around the tools like puppet-doc-lint that were demonstrated during the lightning talks and it’s good to see these missing<br>aspects of the testing tool chain getting some light.</p>
<p>It’s nice to think that we have moved to this stage now where we have all the tools to support a full development tool chain for puppet and that most of the<br>discussion was around improving and maturing what we have.</p>
<h4 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h4><p>Docker is one of those tools that can be considered the latest hotness so it’s no surprise that it gained some interest here also. Many people wanted to see it<br>in use and demonstrated and to discuss it’s use either from the point of view of being able to test with it or test against it.</p>
<p>I see this topic getting a lot more coverage in the future as more and more teams move into this space.</p>
<h4 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h4><p>Led by myself, Drewi Wilson and Travis Fields (<a href="https://twitter.com/tefields" target="_blank" rel="external">@tefields</a>) the two aims for this discussion were to gather input/feedback from people using<br>the existing windows modules and to try and discover areas in the windows ecosystem that were not currently managed (either well or at all) by Puppet.</p>
<p>We got some fantastic feedback we got regarding our OpenTable modules - thank you to everyone who was there any everyone else who reached out about that.</p>
<p>We also managed to start to populate a list of things that need some work. You can contribute to that list<br><a href="https://docs.google.com/document/d/1bwgTo4D7lL8REA1s-IIKlfMrvY434Xn0cyZ7b1X-TwQ" target="_blank" rel="external">here</a></p>
<p>There was also some discussion of using MCollective on Windows. This has been a little painful in the past (I should blog about this in the future) but it will<br>be getting a little more love going forward. Generally PuppetLabs is very aware of the orchestration space and will be looking into solving this problem with<br>it’s tools going forward.</p>
<h4 id="Forge-Improvements"><a href="#Forge-Improvements" class="headerlink" title="Forge Improvements"></a>Forge Improvements</h4><p>Given that this was the Module track it was obvious that at some point we would all want to discuss improvement that we would want to see in the puppet forge. Ryan<br>led the table here and there was lots of be said by all.</p>
<p>A couple of interesting documents emerged that you might be interested in:</p>
<ul>
<li><a href="https://docs.google.com/document/d/1N8U_8UnIGFHC1Q6aTyLgx1d6wvvjuyTT1EO-OYSIu3k" target="_blank" rel="external">Suggestions for the Puppet Approved module criteria</a></li>
<li><a href="https://docs.google.com/document/d/1gwoM8xHnWaRQ3Jqce0oursI_ts5BWnHEUVXRQuIh6Yk" target="_blank" rel="external">Forge Improvements</a></li>
</ul>
<p>There was also some discussion of how best to pull stats out from the forge. Many people either scrape the API, use the API to take a dump of the whole of the forge<br>but none of these approaches are best for either the user or for the forge site itself. PuppetLabs uses various approaches to this internally depending on the use<br>case. Such use cases include: “who is using my module?” or “who is using the bit of code?”. There should be improvements to the forge to make answering these sorts<br>of questions a little easier in the future.</p>
<h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>The contributor summit was personally one of the most useful days of the conference. Being able to see the lastest tooling and discuss the latest problems is always<br>very useful to module authors like ourselves. Hopefully you’ll find this summary as useful as we do.</p>
<p>Next up Day 1 - PuppetConf proper..</p>
</article><ul class="pager blog-pager"><li class="previous"><a href="/blog/2014/10/06/puppetconf-2014-part-2/" data-toggle="tooltip" data-placement="top" title="PuppetConf 2014 - Part 2">← Previous Post</a></li><li class="next"><a href="/blog/2014/09/04/introducing-hobknob-feature-toggling-with-etcd/" data-toggle="tooltip" data-placement="top" title="Introducing Hobknob: Feature toggling with etcd">Next Post →</a></li></ul></div></div></div><footer><div class="container beautiful-jekyll-footer"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center footer-links"><li><a href="https://github.com/opentable" title="GitHub"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-stack-1x fa-inverse fa-github"></i></span></a></li><li><a href="https://twitter.com/opentabletechuk" title="Twitter"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-stack-1x fa-inverse fa-twitter"></i></span></a></li><li><a href="https://www.linkedin.com/company/12181" title="LinkedIn"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-stack-1x fa-inverse fa-linkedin"></i></span></a></li><li><a href="http://stackoverflow.com/jobs/companies/opentable" title="StackOverflow"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-stack-1x fa-inverse fa-stack-overflow"></i></span></a></li></ul><p class="copyright text-muted">© OpenTable • 2016 • <a href="mailto:undefined"></a>
</p><p class="theme-by text-muted">Theme by
<a href="https://github.com/twoyao/beautiful-hexo">beautiful-hexo</a></p></div></div></div></footer><script src="/js/jquery-1.11.2.min.js"></script><script src="/js/bootstrap.min.js"></script><script src="/js/main.js"></script><script src="/js/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script>(function (i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
    a = s.createElement(o),
            m = s.getElementsByTagName(o)[0];
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m)
})(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
ga('create', 'UA-2621903-16', 'auto');
ga('send', 'pageview');</script></body></html>